	-- MySQL Script generated by MySQL Workbench
	-- Wed Aug  9 12:23:28 2023
	-- Model: New Model    Version: 1.0
	-- MySQL Workbench Forward Engineering
	SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
	SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
	SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

	-- -----------------------------------------------------
	-- Schema WeeGigDB
	-- -----------------------------------------------------

	-- -----------------------------------------------------
	-- Schema WeeGigDB
	-- -----------------------------------------------------
	CREATE SCHEMA IF NOT EXISTS `WeeGigDB` DEFAULT CHARACTER SET utf8 ;
	USE `WeeGigDB` ;

	-- -----------------------------------------------------
	-- Table `WeeGigDB`.`LOGIN`
	-- -----------------------------------------------------
	DROP TABLE IF EXISTS `WeeGigDB`.`LOGIN` ;

	CREATE TABLE IF NOT EXISTS `WeeGigDB`.`LOGIN` (
	  `email` VARCHAR(45) NOT NULL,
	  `password` VARCHAR(32) NOT NULL,
	  PRIMARY KEY (`email`))
	ENGINE = InnoDB;


	-- -----------------------------------------------------
	-- Table `WeeGigDB`.`USERS`
	-- -----------------------------------------------------
	DROP TABLE IF EXISTS `WeeGigDB`.`USERS` ;

	CREATE TABLE IF NOT EXISTS `WeeGigDB`.`USERS` (
	  `id_USER` INT NOT NULL AUTO_INCREMENT,
	  `username` VARCHAR(45) NOT NULL,
	  `email` VARCHAR(45) NOT NULL,
	  `name` VARCHAR(45) NOT NULL,
	  `surname` VARCHAR(45) NOT NULL,
	  `doc_type` INT NOT NULL,
	  `document` VARCHAR(9) NOT NULL,
	  `phone_number` VARCHAR(12) NOT NULL,
	  `birthdate` DATE NOT NULL,
	  `user_type` ENUM('Employee', 'Employer') NOT NULL,
	  `company_name` VARCHAR(45) NULL,
	  `company_NIF` VARCHAR(9) NULL,
	  `address` VARCHAR(45) NULL,
	  `company_phone_number` VARCHAR(12) NULL,
	  `website` VARCHAR(45) NULL,
	  UNIQUE INDEX `username_UNIQUE` (`username` ASC) VISIBLE,
	  PRIMARY KEY (`id_USER`),
	  UNIQUE INDEX `id_USER_UNIQUE` (`id_USER` ASC) VISIBLE,
	  INDEX `email_login` (`email` ASC) VISIBLE,
	  CONSTRAINT `email_login`
		FOREIGN KEY (`email`)
		REFERENCES `WeeGigDB`.`LOGIN` (`email`)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION)
	ENGINE = InnoDB;


	-- -----------------------------------------------------
	-- Table `WeeGigDB`.`JOB_OFFERS`
	-- -----------------------------------------------------
	DROP TABLE IF EXISTS `WeeGigDB`.`JOB_OFFERS` ;

	CREATE TABLE IF NOT EXISTS `WeeGigDB`.`JOB_OFFERS` (
	  `id_JOB_OFFERS` INT NOT NULL AUTO_INCREMENT,
      `status` VARCHAR(45) NULL,
	  `title` VARCHAR(45) NULL,
	  `description` VARCHAR(255) NULL,
	  `payment_type` VARCHAR(45) NULL,
	  `payment` VARCHAR(45) NULL,
	  `location` VARCHAR(45) NULL,
	  `schedule` DATETIME NULL,
	  `category` VARCHAR(45) NULL,
	  `id_Employer` INT NULL,
	  `id_Employees` INT NULL,
	  PRIMARY KEY (`id_JOB_OFFERS`),
	  INDEX `id_Employees` (`id_Employees` ASC) VISIBLE,
	  INDEX `id_Employer` (`id_Employer` ASC) VISIBLE,
	  CONSTRAINT `offer_creator`
		FOREIGN KEY (`id_employer`)
		REFERENCES `WeeGigDB`.`USERS` (`id_USER`)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION)
	ENGINE = InnoDB;


	-- -----------------------------------------------------
	-- Table `WeeGigDB`.`JOB_APPLICATION`
	-- -----------------------------------------------------
	DROP TABLE IF EXISTS `WeeGigDB`.`JOB_APPLICATION` ;

	CREATE TABLE IF NOT EXISTS `WeeGigDB`.`JOB_APPLICATION` (
	  `id_USER` INT NOT NULL,
	  `id_JOB_OFFERS` INT NOT NULL,
	  `application_date` VARCHAR(45) NULL,
	  `application_status` VARCHAR(45) NULL,
	  PRIMARY KEY (`id_USER`, `id_JOB_OFFERS`),
	  INDEX `employer_idx` (`id_JOB_OFFERS` ASC) VISIBLE,
	  CONSTRAINT `employer`
		FOREIGN KEY (`id_JOB_OFFERS`)
		REFERENCES `WeeGigDB`.`JOB_OFFERS` (`id_JOB_OFFERS`)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
	  CONSTRAINT `username`
		FOREIGN KEY (`id_USER`)
		REFERENCES `WeeGigDB`.`USERS` (`id_USER`)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION)
	ENGINE = InnoDB;


CREATE TABLE IF NOT EXISTS `WeeGigDB`.`REVIEWS` (
  `id_REVIEWS` INT NOT NULL AUTO_INCREMENT,
  `review_content` VARCHAR(255) NULL,
  `rating` TINYINT NOT NULL CHECK (rating >= 1 AND rating <= 5),
  `id_Reviewer` INT NOT NULL,
  `id_Reviewed` INT NOT NULL,
  `id_Job` INT NOT NULL,
  `review_date` DATE NOT NULL,
  PRIMARY KEY (`id_REVIEWS`),
  INDEX `id_Reviewer_idx` (`id_Reviewer` ASC) VISIBLE,
  INDEX `id_Reviewed_idx` (`id_Reviewed` ASC) VISIBLE,
  INDEX `id_Job_idx` (`id_Job` ASC) VISIBLE,
  CONSTRAINT `id_Reviewer_fk`
    FOREIGN KEY (`id_Reviewer`)
    REFERENCES `WeeGigDB`.`USERS` (`id_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_Reviewed_fk`
    FOREIGN KEY (`id_Reviewed`)
    REFERENCES `WeeGigDB`.`USERS` (`id_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `id_Job_fk`
    FOREIGN KEY (`id_Job`)
    REFERENCES `WeeGigDB`.`JOB_OFFERS` (`id_JOB_OFFERS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;



	SET SQL_MODE=@OLD_SQL_MODE;
	SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
	SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
